source 'https://github.com/CocoaPods/Specs.git'

platform :ios, '11.0'
use_frameworks!
inhibit_all_warnings!
ENV['COCOAPODS_DISABLE_STATS'] = "true"
ENV['SWIFT_VERSION'] = '5'


def shared_pods
  pod 'Alamofire', '~> 4.8.1'
  pod 'SwiftyJSON', '~> 3'
  pod 'KeychainSwift', '~> 19'
end

def core_pods
  shared_pods
  pod 'Firebase/Core', '~> 6'
  pod 'Firebase/Crashlytics', '~> 6'
  pod 'Firebase/Analytics', '~> 6'
  pod 'Firebase/RemoteConfig', '~> 6'

  pod 'Netmera', '~> 3.8.4'

  pod 'SDWebImage', '~> 4'
  pod 'GoogleConversionTracking', '~> 3'
  pod 'GoogleTagManager', '~> 7'
  pod 'Adjust', '~> 4'
  #pod 'ActiveLabel'

  #Keyboard
  pod 'Typist', '~> 1'
  pod 'iCarousel', '~> 1'

  pod 'ReachabilitySwift'
  pod 'MBProgressHUD', '~> 1'
  pod 'TTGSnackbar', '~> 1'
  
  #logger
  pod 'XCGLogger', '~> 7'

  #widget
  pod 'MMWormhole', '~> 2.0.0'
  
  #migration
  pod 'SQLite.swift', '0.11.4'
  
  pod 'SwiftyGif', '~> 5'
end

def lifebox_pods
  core_pods
  pod 'FBSDKCoreKit', '~> 8'
  pod 'FBSDKLoginKit', '~> 8'
  pod 'FBSDKShareKit', '~> 8'
  pod 'YYImage', '~> 1'
  pod 'SwiftyDropbox', '~> 6'
  pod 'MaterialComponents/Slider'
  pod 'Mantis', :git => 'https://github.com/fireengine-ios/Mantis.git', :tag => 'FE-1.3.2.5'
  pod 'MetalPetal/Swift'
end

def sharing_pods
  shared_pods
  pod 'Netmera', '~> 3'
  pod 'MMWormhole', '~> 2.0.0'
end

def file_provider_pods
  shared_pods
  pod 'Netmera', '~> 3'
  pod 'MMWormhole', '~> 2.0.0'
end

def file_provider_ui_pods
  shared_pods
end

def autosync_widget_pods
  pod 'MMWormhole', '~> 2.0.0'
  pod 'KeychainSwift', '~> 19'
end

def notification_pods
  pod 'Netmera', '~> 3'
  pod 'iCarousel', '~> 1'
end

def widget_pods
  shared_pods
  pod 'SDWebImage', '~> 4'
  pod 'MMWormhole', '~> 2.0.0'
  pod 'XCGLogger', '~> 7'
end

def authentication_pods
  pod 'FastLogin', :git => 'https://github.com/Turkcell/FastLogin.git', :branch => 'v2.0'
end

target 'Depo_LifeTech' do
  lifebox_pods
end

target 'LifeTech-LifeboxShared' do
  sharing_pods
end

target 'LifeTech-LifeboxFileProvider' do
  file_provider_pods
end

target 'LifeTech-LifeboxFileProviderUI' do
  file_provider_ui_pods
end

target 'LifeTech-LifeboxWidgetExtension' do
  widget_pods
end

target "LifeTech-NotificationService" do
  notification_pods
end

target 'TC_Depo_LifeTech' do
  lifebox_pods
end

target 'TC_Depo_LifeTech_Bundle' do
  lifebox_pods
end

target 'LifeboxShared' do
  sharing_pods
end

target 'LifeboxFileProvider' do
  file_provider_pods
end

target 'LifeboxFileProviderUI' do
  file_provider_ui_pods
end

target 'LifeboxWidgetExtension' do
  widget_pods
end

#target 'autosync-widget' do
#  autosync_widget_pods
#end

target "LifeboxNotificationService" do
  notification_pods
end

target 'LifeboxUnitTests' do
  lifebox_pods
end

target 'Billo' do
  lifebox_pods
end

target 'Billo_Bundle' do
  lifebox_pods
end

target 'BilloShared' do
  sharing_pods
end

target 'BilloFileProvider' do
  file_provider_pods
end

target 'BilloProviderUI' do
  file_provider_ui_pods
end

#target 'Billo-widget' do
#  autosync_widget_pods
#end

target 'BilloWidgetExtension' do
  widget_pods
end

target 'BilloNotificationService' do
  notification_pods
end

target 'LifeTech_Billo' do
  lifebox_pods
end

target 'LifeTech_BilloShared' do
  sharing_pods
end

target 'LifeTech_BilloFileProvider' do
  file_provider_pods
end

target 'LifeTech_BilloProviderUI' do
  file_provider_ui_pods
end

#target 'LifeTech_Billo-widget' do
#  autosync_widget_pods
#end

target 'LifeTech_BilloWidgetExtension' do
  widget_pods
end

target 'LifeTech_BilloNotificationService' do
  notification_pods
end

post_install do |installer|
    installer.pods_project.targets.each do |target|
        if ['SwiftyJSON'].include? "#{target}"
          print "Setting #{target}'s SWIFT_VERSION to 4.0\n"
          target.build_configurations.each do |config|
              config.build_settings['SWIFT_VERSION'] = '4.0'
          end
          else
          if ['TTGSnackbar'].include? "#{target}"
            print "Setting #{target}'s SWIFT_VERSION to 5.0\n"
            target.build_configurations.each do |config|
                config.build_settings['SWIFT_VERSION'] = '5.0'
            end
            else
              target.build_configurations.each do |config|
                  config.build_settings.delete('SWIFT_VERSION')
              end
          end
        end
    end
    
    print "Setting the default SWIFT_VERSION to 5.0\n"
    installer.pods_project.build_configurations.each do |config|
        config.build_settings['SWIFT_VERSION'] = '5.0'
        config.build_settings['ENABLE_BITCODE'] = 'YES'
    end

    ## https://stackoverflow.com/a/32652721/5893286
    installer.pods_project.targets.each do |target|
        target.build_configurations.each do |config|
            config.build_settings['ONLY_ACTIVE_ARCH'] = 'NO'
            config.build_settings['IPHONEOS_DEPLOYMENT_TARGET'] = '11.0'
        end
    end
end
